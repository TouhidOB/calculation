{% extends "base.html" %}

{% block title %}Radiation Dose Converter (Sieverts to Rems){% endblock %}

{% block meta_description %}Convert radiation equivalent dose instantly between Sieverts (Sv) and Rems (Rem).{% endblock %}

{% block meta_keywords %}radiation converter, sieverts, rems, equivalent dose, radiation safety, physics units{% endblock %}

{% block extra_head %}
<style>
    /* Base styles from the template */
    .calc-wrapper {
        background: white;
        padding: 25px;
        border-radius: 10px;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
    }
    
    .section-title {
        font-weight: 600;
        margin-top: 20px;
        color: #28a745; /* Safety Green Theme */
    }
    
    /* Input Group Styling */
    .input-group-custom {
        margin-bottom: 20px;
        background: #e9fbe9; /* Light green background for emphasis */
        border-radius: 8px;
        padding: 15px;
        border: 1px solid #28a745; 
    }
    
    .input-group-custom label {
        font-weight: 500;
        margin-bottom: 5px;
        color: #1e7e34;
    }

    .input-field {
        font-size: 1.2rem;
        padding: 10px;
        border-radius: 6px;
        border: 1px solid #ced4da;
    }

    /* Results Styling */
    .result-list-group {
        border-radius: 8px;
        overflow: hidden;
    }

    .result-list-group .list-group-item {
        display: flex;
        flex-direction: column;
        align-items: start;
        padding: 15px 20px;
        margin-bottom: 10px;
        border-left: 4px solid transparent;
        transition: all 0.2s ease;
        background-color: #f7f7f7;
    }

    .result-list-group .unit-name {
        font-weight: 600;
        color: #343a40;
        margin-bottom: 5px;
        font-size: 1.1rem;
    }
    
    .result-list-group .unit-value {
        font-family: monospace;
        font-size: 1.3rem;
        font-weight: bold;
        color: #dc3545; /* Caution Red */
        word-break: break-all;
        width: 100%;
        background-color: #343a40;
        padding: 10px;
        border-radius: 4px;
    }
    
    .conversion-button {
        background-color: #28a745;
        color: white;
        font-weight: bold;
        padding: 12px;
        margin-top: 10px;
        border-radius: 8px;
        width: 100%;
        transition: background-color 0.2s;
    }
    .conversion-button:hover {
        background-color: #1e7e34;
    }
</style>
{% endblock %}

{% block content %}
<div class="container my-4">
    <h1 class="mb-3">☢️ Radiation Dose Converter</h1>
    <p class="small-muted">Convert between **Sieverts (Sv)** (SI unit) and **Rems (Rem)** (Traditional unit) for equivalent radiation dose. </p>
    

    <div class="calc-wrapper mt-4">

        <h5 class="section-title">Step 1: Enter Value and Direction</h5>

        <div class="input-group-custom">
            
            <!-- Value Input -->
            <label for="inputValue">Value to Convert</label>
            <input type="number" class="form-control input-field" id="inputValue" placeholder="e.g., 10" value="10" min="0" step="any" autofocus>
            
            <!-- Direction Select -->
            <div class="mt-3">
                <label for="directionSelect">Conversion Direction</label>
                <select id="directionSelect" class="form-select input-field">
                    <option value="SvtoRem">Sieverts (Sv) → Rems (Rem)</option>
                    <option value="RemtoSv">Rems (Rem) → Sieverts (Sv)</option>
                </select>
            </div>
            
            <p class="small-muted mt-2">Conversion Factor: $1 \text{ Sv} = 100 \text{ Rem}$</p>
        </div>

        <button class="btn conversion-button" onclick="convertRadiationDose()">
            Calculate Dose
        </button>

        <h5 class="section-title mt-4">Step 2: Converted Result</h5>
        
        <div class="result-list-group mt-3" id="resultsList">
            <div class="alert alert-info" id="initialMessage">Converted results will appear here.</div>
        </div>

    </div>
    
    <div class="mt-5">
        <p class="small-muted">**Units:** The Sievert (Sv) is the standard international unit. The Rem (Roentgen equivalent man) is older, commonly used in the United States. Both measure the health effect of low levels of ionizing radiation on the human body.</p>
    </div>

</div>
{% endblock %}

{% block extra_js %}
<script>
    // --- CONSTANTS ---
    const Sv_TO_REM_FACTOR = 100; // 1 Sievert = 100 Rems

    // --- DOM Elements ---
    const inputValue = document.getElementById('inputValue');
    const directionSelect = document.getElementById('directionSelect');
    const resultsList = document.getElementById('resultsList');

    /**
     * Converts the radiation dose value based on the selected direction.
     */
    function convertRadiationDose() {
        resultsList.innerHTML = '';
        const value = parseFloat(inputValue.value);
        const direction = directionSelect.value;
        
        if (isNaN(value) || value < 0) {
            resultsList.innerHTML = `<div class="alert alert-danger">Please enter a valid non-negative number.</div>`;
            return;
        }

        let result = 0;
        let inputUnit = '';
        let outputUnit = '';

        if (direction === 'SvtoRem') {
            // Sieverts (Sv) to Rems (Rem): Rem = Sv * 100
            result = value * Sv_TO_REM_FACTOR;
            inputUnit = 'Sieverts (Sv)';
            outputUnit = 'Rems (Rem)';
        } else if (direction === 'RemtoSv') {
            // Rems (Rem) to Sieverts (Sv): Sv = Rem / 100
            result = value / Sv_TO_REM_FACTOR;
            inputUnit = 'Rems (Rem)';
            outputUnit = 'Sieverts (Sv)';
        }

        // --- Render Results ---
        
        // 1. Input Echo
        renderResult(`Input Value (${inputUnit})`, value.toFixed(4), inputUnit, '343a40');

        // 2. Converted Output
        // Use a higher precision for the output since the conversion is exact
        renderResult(`Converted Value (${outputUnit})`, result.toFixed(6), outputUnit, 'dc3545');
    }
    
    /**
     * Renders a single result item.
     * @param {string} name - The name of the result/unit.
     * @param {string} value - The numerical value.
     * @param {string} unit - The unit abbreviation.
     * @param {string} borderColor - The color for the left border (HEX).
     */
    function renderResult(name, value, unit, borderColor) {
        const item = document.createElement('div');
        item.classList.add('list-group-item');
        item.style.borderLeftColor = `#${borderColor}`;

        item.innerHTML = `
            <div class="unit-name">${name}</div>
            <div class="unit-value">
                ${value} <span style="font-size: 0.8em; font-weight: normal; color: #ffc107;">${unit}</span>
            </div>
        `;
        resultsList.appendChild(item);
    }
    
    // --- Initialization & Event Listeners ---
    
    function setupListeners() {
        // Use 'input' event for live updates on value change
        inputValue.addEventListener('input', convertRadiationDose);
        // Use 'change' event for direction switch
        directionSelect.addEventListener('change', convertRadiationDose);
    }

    window.onload = function() {
        setupListeners();
        convertRadiationDose(); // Run initial conversion on load
    };

</script>
{% endblock %}