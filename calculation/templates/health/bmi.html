{% extends "base.html" %}

{% block title %}BMI Calculator - Body Mass Index Verification{% endblock %}
{% block meta_description %}Calculate your Body Mass Index (BMI) instantly. Understand your health status with our
precise and easy-to-use BMI tool.{% endblock %}
{% block meta_keywords %}BMI calculator, body mass index, health tool, weight calculator, obesity check{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
<style>
  :root {
    --primary-health: #10b981;
    /* Emerald-500 */
    --primary-dark: #059669;
    /* Emerald-600 */
    --accent-blue: #3b82f6;
  }

  body {
    background-color: #f0fdf4;
    /* Light Green background */
  }

  .calc-card {
    border: none;
    border-radius: 1rem;
    box-shadow: 0 0.15rem 1.75rem 0 rgba(16, 185, 129, 0.15);
    background: white;
  }

  .input-icon-wrap {
    background-color: #d1fae5;
    border-right: none;
    color: var(--primary-dark);
    border-color: #d1fae5;
  }

  .form-control:focus {
    border-color: var(--primary-health);
    box-shadow: 0 0 0 0.25rem rgba(16, 185, 129, 0.25);
  }

  .result-display {
    background: linear-gradient(135deg, var(--primary-health) 0%, var(--primary-dark) 100%);
    color: white;
    border-radius: 1rem;
    transition: all 0.3s ease;
  }

  .info-card {
    border-left: 4px solid var(--primary-health);
    background: #f8fafc;
    border-radius: 0.5rem;
  }

  .category-badge {
    background-color: rgba(255, 255, 255, 0.2);
    padding: 5px 15px;
    border-radius: 20px;
    font-weight: bold;
    backdrop-filter: blur(5px);
  }
</style>
{% endblock %}

{% block content %}
<div class="container py-5">
  <div class="text-center mb-5">
    <h1 class="display-5 fw-bold text-dark"><i class="bi bi-heart-pulse-fill text-success me-2"></i>BMI Calculator</h1>
    <p class="lead text-secondary">Check your Body Mass Index to understand your healthy weight range.</p>
  </div>

  <div class="">
    <div class="row justify-content-center">
      <div class="col-lg-6 col-md-8">
        <div class="card calc-card p-4 p-md-5">

          <form id="bmi-form">
            <div class="mb-4">
              <label class="form-label fw-bold small text-uppercase text-muted">Step 1: Enter Your Details</label>

              <div class="row g-3">
                <div class="col-md-6">
                  <label class="form-label small fw-bold">Weight (kg)</label>
                  <div class="input-group input-group-lg">
                    <span class="input-group-text input-icon-wrap"><i class="bi bi-speedometer2"></i></span>
                    <input type="number" class="form-control" id="weight" placeholder="e.g. 70" required step="0.1"
                      min="1">
                  </div>
                </div>
                <div class="col-md-6">
                  <label class="form-label small fw-bold">Height (cm)</label>
                  <div class="input-group input-group-lg">
                    <span class="input-group-text input-icon-wrap"><i class="bi bi-rulers"></i></span>
                    <input type="number" class="form-control" id="height" placeholder="e.g. 175" required step="1"
                      min="1">
                  </div>
                </div>
              </div>
            </div>

            <button class="btn btn-success btn-lg w-100 shadow-sm fw-bold py-3" type="submit"
              style="background-color: var(--primary-health); border:none;">
              <i class="bi bi-calculator me-2"></i>Calculate BMI
            </button>
          </form>

          <div id="result-container" class="mt-5 d-none animate__animated animate__fadeInUp">
            <div class="result-display p-4 text-center mb-4 shadow">
              <p class="mb-1 text-uppercase small opacity-75">Your Body Mass Index</p>
              <h2 class="display-3 fw-bold mb-2" id="bmi-output">0.00</h2>
              <div class="mt-3">
                <span class="category-badge" id="bmi-category">Normal</span>
              </div>
            </div>

            <div class="info-card p-3 shadow-sm">
              <h6 class="fw-bold mb-2 text-dark"><i class="bi bi-info-circle me-2"></i>BMI Guide</h6>
              <ul class="list-unstyled mb-0 small text-secondary">
                <li class="d-flex justify-content-between"><span>Underweight</span> <span>&lt; 18.5</span></li>
                <li class="d-flex justify-content-between fw-bold text-success"><span>Normal Weight</span> <span>18.5 –
                    24.9</span></li>
                <li class="d-flex justify-content-between"><span>Overweight</span> <span>25 – 29.9</span></li>
                <li class="d-flex justify-content-between text-danger"><span>Obesity</span> <span>30+</span></li>
              </ul>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>
</div>

<div class="">
  <div class="row justify-content-center mt-5">
    <div class="col-lg-8">
      <div class="p-4 bg-white rounded shadow-sm">
        <h2>Body Mass Index (BMI) Calculator</h2>
        <p>A <strong>BMI Calculator</strong> is a simple yet powerful screening tool used by healthcare professionals
          and
          individuals worldwide to estimate body fat based on height and weight. It provides a numerical value that
          helps
          categorize a person as underweight, normal weight, overweight, or obese. While it isn't a direct measure of
          body
          fat percentages, it serves as an excellent initial indicator of potential health risks associated with weight.
        </p>

        <h3>How This BMI Calculator Works</h3>
        <p>Understanding your BMI starts with accurate data. This calculator uses the standard formula recognized by the
          World Health Organization (WHO) and the Centers for Disease Control and Prevention (CDC) to instantly assess
          your weight status:</p>

        <div class="alert alert-light border text-center fw-bold font-monospace">
          BMI = Weight (kg) / [Height (m)]²
        </div>

        <p>For those using imperial units (pounds and inches), the formula is adjusted slightly:</p>
        <div class="alert alert-light border text-center fw-bold font-monospace">
          BMI = 703 × Weight (lbs) / [Height (in)]²
        </div>

        <p>Based on the calculated result, your weight status falls into one of four primary categories:</p>

        <ul>
          <li><strong>Underweight (BMI &lt; 18.5)</strong><br>
            You may not be eating enough or could have an underlying health condition. Being underweight can weaken your
            immune system and lead to bone fragility.</li>

          <li><strong>Normal Weight (BMI 18.5 – 24.9)</strong><br>
            This range is associated with the lowest risk of weight-related health issues such as heart disease and
            diabetes. Maintaining this weight is ideal for long-term health.</li>

          <li><strong>Overweight (BMI 25 – 29.9)</strong><br>
            You are carrying excess weight relative to your height. This increases the load on your heart and joints,
            potentially leading to long-term health complications if not managed.</li>

          <li><strong>Obesity (BMI 30+)</strong><br>
            Obesity significantly increases the risk of chronic diseases, including type 2 diabetes, high blood
            pressure,
            and cardiovascular conditions. Professional medical advice is recommended.</li>
        </ul>

        <h3>Step 1: Measuring Correctly</h3>
        <p>To get the most accurate BMI result, you need precise measurements. Small errors in height or weight inputs
          can
          shift you into a different category.</p>

        <h4>Tips for Accurate Measurement</h4>
        <ul>
          <li><strong>Weigh Yourself in the Morning:</strong> Body weight fluctuates throughout the day due to hydration
            and food intake. Weighing yourself first thing in the morning provides the most consistent baseline.</li>
          <li><strong>Remove Heavy Clothing:</strong> Shoes, jackets, and belts add unnecessary weight. Wear light
            clothing or weigh yourself without clothes for precision.</li>
          <li><strong>Stand Tall:</strong> When measuring height, stand against a flat wall with your heels touching the
            baseboard. Look straight ahead and have someone else mark the top of your head if possible.</li>
        </ul>

        <h3>Step 2: Interpreting Your Score (Health Implications)</h3>
        <p>Your BMI score acts as a "traffic light" for your health. While it doesn't diagnose health, it signals when
          you
          should pay closer attention to your lifestyle.</p>

        <h4>Why a High BMI Matters</h4>
        <p>Excess body fat is linked to inflammation and metabolic stress. Individuals with a BMI above 30 are
          statistically more likely to develop:</p>
        <ul>
          <li>Hypertension (High Blood Pressure)</li>
          <li>Dyslipidemia (High Cholesterol)</li>
          <li>Type 2 Diabetes</li>
          <li>Coronary Heart Disease</li>
          <li>Stroke</li>
          <li>Sleep Apnea and Respiratory Problems</li>
        </ul>

        <h4>Why a Low BMI Matters</h4>
        <p>Being significantly underweight is also dangerous. It can lead to:</p>
        <ul>
          <li>Malnutrition and Vitamin Deficiencies</li>
          <li>Osteoporosis (Weak Bones)</li>
          <li>Decreased Immune Function</li>
          <li>Fertility Issues</li>
          <li>Anemia</li>
        </ul>

        <h3>Step 3: Taking Action (Improve Your BMI)</h3>
        <p>Whether you need to lose, gain, or maintain weight, the fundamental principle is <strong>Energy
            Balance</strong>.</p>

        <h4>To Lower Your BMI (Weight Loss)</h4>
        <p>If you are overweight or obese, aiming for a modest weight loss of 5-10% can significantly improve health
          markers.</p>
        <ul>
          <li><strong>Caloric Deficit:</strong> Consume fewer calories than you burn. Use a TDEE Calculator to find your
            maintenance level and subtract 500 calories.</li>
          <li><strong>Prioritize Protein:</strong> Protein promotes satiety and helps preserve muscle mass during weight
            loss.</li>
          <li><strong>Increase Activity:</strong> Combine aerobic exercise (walking, running) with resistance training.
          </li>
        </ul>

        <h4>To Raise Your BMI (Weight Gain)</h4>
        <p>If you are underweight, the goal is to gain functional mass (muscle and healthy fat), not just "junk" weight.
        </p>
        <ul>
          <li><strong>Caloric Surplus:</strong> Eat more calories than you burn. Focus on nutrient-dense foods like
            nuts,
            avocados, and whole grains.</li>
          <li><strong>Strength Training:</strong> Lift weights to stimulate muscle growth rather than just storing
            excess
            calories as fat.</li>
          <li><strong>Frequent Meals:</strong> Eat 5-6 smaller meals throughout the day if you struggle with a large
            appetite.</li>
        </ul>

        <h3>Limitations of BMI (Who Should Be Careful?)</h3>
        <p>While BMI is a great general tool, it is not perfect. It does not distinguish between muscle mass, bone
          density, and fat mass. This can lead to misclassifications for certain groups:</p>

        <h4>1. Athletes and Bodybuilders</h4>
        <p>Muscle is denser than fat. A muscular athlete might have a BMI of 30 (technically "obese") despite having
          very
          low body fat and excellent metabolic health.</p>

        <h4>2. The Elderly</h4>
        <p>As we age, we tend to lose muscle mass. An older adult might have a "normal" BMI but still have excess body
          fat
          (sarcopenic obesity) and low muscle mass.</p>

        <h4>3. Pregnancy</h4>
        <p>BMI is not used to diagnosis weight issues during pregnancy, as weight gain is necessary and expected. Use a
          dedicated Pregnancy Weight Gain Calculator instead.</p>

        <h4>4. Ethnic Differences</h4>
        <p>Research suggests that health risks vary by ethnicity. For example, Asian populations may face increased
          health
          risks at a lower BMI (often considered starting at 23 rather than 25).</p>

        <h3>Frequently Asked Questions (FAQs)</h3>
        <div class="accordion" id="bmiFaq">
          <div class="accordion-item">
            <h2 class="accordion-header" id="headingOne">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                Is BMI accurate for children?
              </button>
            </h2>
            <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne"
              data-bs-parent="#bmiFaq">
              <div class="accordion-body">
                For children and teens (ages 2-19), BMI is interpreted differently. It uses percentiles based on age and
                gender (e.g., "95th percentile") rather than standard adult cutoffs. You should use a pediatric growth
                chart or a specialized Child BMI Calculator.
              </div>
            </div>
          </div>
          <div class="accordion-item">
            <h2 class="accordion-header" id="headingTwo">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                What is a "Prime" BMI?
              </button>
            </h2>
            <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo"
              data-bs-parent="#bmiFaq">
              <div class="accordion-body">
                BMI Prime is the ratio of your BMI to the upper limit of the "normal" range (usually 25). A score of 1.0
                means you are exactly at the border of overweight. A score below 1.0 is healthy; above 1.0 indicates
                excess weight.
              </div>
            </div>
          </div>
          <div class="accordion-item">
            <h2 class="accordion-header" id="headingThree">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                Can I be healthy with a high BMI?
              </button>
            </h2>
            <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree"
              data-bs-parent="#bmiFaq">
              <div class="accordion-body">
                Yes, if the high BMI is due to muscle mass rather than fat (common in fit individuals). However, for the
                general population, a high BMI is strongly correlated with metabolic health risks. A doctor can check
                blood pressure and cholesterol for a full picture.
              </div>
            </div>
          </div>
          <div class="accordion-item">
            <h2 class="accordion-header" id="headingFour">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                How often should I check my BMI?
              </button>
            </h2>
            <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour"
              data-bs-parent="#bmiFaq">
              <div class="accordion-body">
                Checking once a month is sufficient. Body weight fluctuates daily due to water retention, so daily
                checking can be misleading. Tracking monthly trends gives a better picture of your progress.
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</div>
{% endblock %}

{% block extra_js %}
<script>
  document.getElementById("bmi-form").addEventListener("submit", function (e) {
    e.preventDefault();

    const w = parseFloat(document.getElementById("weight").value);
    const h = parseFloat(document.getElementById("height").value) / 100; // Convert cm to meters

    if (h > 0 && w > 0) {
      const bmi = (w / (h * h)).toFixed(1);
      let category = "";
      let colorClass = "";

      // Determine category
      if (bmi < 18.5) {
        category = "Underweight";
        colorClass = "#3b82f6"; // Blue
      } else if (bmi >= 18.5 && bmi <= 24.9) {
        category = "Healthy Weight";
        colorClass = "#10b981"; // Green
      } else if (bmi >= 25 && bmi <= 29.9) {
        category = "Overweight";
        colorClass = "#f59e0b"; // Orange/Amber
      } else {
        category = "Obese";
        colorClass = "#ef4444"; // Red
      }

      const output = document.getElementById("bmi-output");
      const catBadge = document.getElementById("bmi-category");
      const resultBox = document.getElementById("result-container");

      output.textContent = bmi;
      catBadge.textContent = category;

      // Dynamic Background for Category
      document.querySelector('.result-display').style.background = `linear-gradient(135deg, ${colorClass} 0%, ${adjustColor(colorClass, -20)} 100%)`;

      resultBox.classList.remove("d-none");
      resultBox.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    }
  });

  // Helper to darken color for gradient
  function adjustColor(color, amount) {
    return '#' + color.replace(/^#/, '').replace(/../g, color => ('0' + Math.min(255, Math.max(0, parseInt(color, 16) + amount)).toString(16)).substr(-2));
  }
</script>
{% endblock %}