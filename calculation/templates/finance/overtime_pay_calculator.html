{% extends "base.html" %}

{% block title %}Overtime Pay Calculator{% endblock %}
{% block meta_description %}Calculate overtime earnings and total pay for a pay period.{% endblock %}

{% block extra_head %}
<style>
.calc-wrapper{background:#fff;padding:22px;border-radius:10px;box-shadow:0 0 10px rgba(0,0,0,0.04)}
.analysis{white-space:pre-wrap}
</style>
{% endblock %}

{% block content %}
<div class="container my-4">
  <h1>Overtime Pay Calculator</h1>
  <p class="small-muted">Compute extra income from overtime hours.</p>

  <div class="calc-wrapper mt-3">
    <form id="ot-form">
      <div class="row">
        <div class="col-md-3 mb-2"><label>Hourly Wage ($)</label><input id="ot-wage" type="number" class="form-control" step="0.01"></div>
        <div class="col-md-3 mb-2"><label>Regular Hours</label><input id="ot-regular" type="number" class="form-control" value="40" step="0.1"></div>
        <div class="col-md-3 mb-2"><label>Overtime Hours</label><input id="ot-hours" type="number" class="form-control" value="0" step="0.1"></div>
        <div class="col-md-3 mb-2"><label>Overtime Multiplier</label><input id="ot-mult" type="number" class="form-control" value="1.5" step="0.01"></div>
      </div>

      <div class="mt-2">
        <button class="btn btn-primary" type="submit">Calculate</button>
        <button id="ot-reset" type="button" class="btn btn-secondary">Reset</button>
      </div>
    </form>

    <div id="ot-result" class="mt-4 d-none">
      <h5>Result</h5>
      <div><strong>Regular Pay:</strong> $<span id="ot-regular-pay">0.00</span></div>
      <div><strong>Overtime Pay:</strong> $<span id="ot-ot-pay">0.00</span></div>
      <div><strong>Total Pay:</strong> $<span id="ot-total-pay">0.00</span></div>

      <h6 class="mt-3">Deep Analysis</h6>
      <div id="ot-analysis" class="analysis alert alert-light"></div>
    </div>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.getElementById('ot-form').addEventListener('submit', function(e){
  e.preventDefault();
  const wage = parseFloat(document.getElementById('ot-wage').value) || 0;
  const regH = parseFloat(document.getElementById('ot-regular').value) || 0;
  const otH = parseFloat(document.getElementById('ot-hours').value) || 0;
  const mult = parseFloat(document.getElementById('ot-mult').value) || 1.5;

  const regPay = wage * regH;
  const otPay = wage * mult * otH;
  const total = regPay + otPay;

  document.getElementById('ot-regular-pay').textContent = regPay.toFixed(2);
  document.getElementById('ot-ot-pay').textContent = otPay.toFixed(2);
  document.getElementById('ot-total-pay').textContent = total.toFixed(2);
  document.getElementById('ot-result').classList.remove('d-none');

  // Deep analysis
  let analysis = `You worked ${otH} overtime hours at ${mult}Ã— rate, earning $${otPay.toFixed(2)} extra.\n`;
  analysis += `Overtime contributes ${((otPay/total)*100 || 0).toFixed(1)}% of this pay period's earnings.\n\n`;
  analysis += `Considerations:\n- Frequent overtime can increase gross earnings but may impact work-life balance.\n- If overtime is regular, negotiate rate or consider salaried arrangement reflecting hours.\n`;

  document.getElementById('ot-analysis').textContent = analysis;
});

document.getElementById('ot-reset').addEventListener('click', function(){
  ['ot-wage','ot-regular','ot-hours','ot-mult'].forEach(id=>document.getElementById(id).value='');
  document.getElementById('ot-result').classList.add('d-none');
});
</script>
{% endblock %}
